<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Your Quote | Northwest Airport Transfers</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: { primary:'#0A2239', accent:'#005bb5', call:'#22c55e' },
          boxShadow: { card:'0 12px 32px rgba(0,0,0,.08)' },
          animation: { pulseSlow: 'pulse 2s infinite' }
        }
      }
    }
  </script>

  <style>
    body{font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
  </style>
</head>
<body class="bg-gray-50 text-gray-800">

  <!-- Header -->
  <header class="sticky top-0 z-50 bg-primary text-white shadow">
    <div class="max-w-5xl mx-auto px-4 flex items-center justify-between h-16">
      <a href="index.html" class="flex items-center gap-3">
        <img src="A_logo_for_Northwest_Airport_Transfers.png" alt="Logo" class="h-10"/>
        <span class="font-bold tracking-tight">Northwest Airport Transfers</span>
      </a>
      <a href="tel:+441234567890"
         class="bg-green-500 hover:bg-green-600 text-white font-bold px-5 py-2 rounded-xl shadow-lg flex items-center gap-2 animate-pulseSlow">
        üìû Call Now
      </a>
    </div>
  </header>

  <!-- Quote Section -->
  <main class="max-w-3xl mx-auto px-4 py-12">
    <h1 class="text-3xl font-bold text-primary text-center">Your Booking Quote</h1>
    <p class="text-center text-gray-600 mt-2">Based on your booking details</p>

    <div id="quoteCard" class="mt-8 bg-white rounded-2xl shadow-card p-6 border border-gray-100">
      <h2 class="text-xl font-bold text-primary mb-4">Booking Summary</h2>
      <ul id="summaryList" class="space-y-2 text-gray-700"></ul>

      <div class="mt-6 p-4 bg-green-50 border border-green-200 rounded-xl text-green-800 font-bold text-lg">
        Estimated Price: <span id="priceText"></span>
      </div>

      <div class="mt-6 grid sm:grid-cols-3 gap-3">
        <button onclick="sendToWhatsApp()" class="bg-green-500 hover:bg-green-600 text-white font-bold rounded-xl px-4 py-3 shadow-lg">üí¨ WhatsApp</button>
        <button onclick="sendToEmail()" class="bg-accent hover:bg-blue-700 text-white font-bold rounded-xl px-4 py-3 shadow-lg">‚úâÔ∏è Email</button>
        <a href="tel:+441234567890" class="bg-green-500 hover:bg-green-600 text-white font-bold rounded-xl px-4 py-3 shadow-lg flex items-center justify-center animate-pulseSlow">üìû Call Now</a>
      </div>
    </div>

    <div id="noData" class="hidden text-center mt-12 text-gray-600">
      <p>No booking details found. Please go back and complete the <a href="index.html#booking" class="text-accent font-semibold">booking form</a>.</p>
    </div>
  </main>

  <!-- Footer -->
  <footer class="bg-primary text-white mt-12">
    <div class="max-w-5xl mx-auto px-4 py-10 text-center">
      <p>&copy; 2025 Northwest Airport Transfers ‚Ä¢ All Rights Reserved</p>
    </div>
  </footer>

  <script>
    const WHATSAPP_NUMBER = "447123456789";
    const EMAIL_ADDRESS   = "bookings@northwestairporttransfers.com";

    function calculatePrice(d){
      let price = 0;
      const pax = (d.passengers || "").includes("4") ? "4+" : "1-3";
      const pickup = d.pickup.toLowerCase();

      if(pickup.includes("bolton") && d.dropoffAirport?.includes("Manchester")) price = pax==="4+"?65:50;
      if(pickup.includes("wigan")  && d.dropoffAirport?.includes("Manchester")) price = pax==="4+"?70:55;
      if(pickup.includes("bolton") && d.dropoffAirport?.includes("Liverpool"))  price = pax==="4+"?80:70;
      if(pickup.includes("wigan")  && d.dropoffAirport?.includes("Liverpool"))  price = pax==="4+"?80:70;

      return price && d.journeyType==="return" ? `¬£${price*2} (Return)` : price ? `¬£${price} (One Way)` : "Contact us for a price";
    }

    function buildSummary(d, price){
      const list = document.getElementById("summaryList");
      list.innerHTML = "";
      const add = (label,val) => { if(val) list.innerHTML += `<li><strong>${label}:</strong> ${val}</li>`; };
      add("Name", d.name);
      add("Mobile", d.mobile);
      add("Email", d.email);
      add("Journey Type", d.journeyType);
      add("Pickup", d.pickup);
      add("Dropoff", d.journeyType==="return" ? (d.dropoffAirport + (d.terminal? " ("+d.terminal+")":"")) : d.dropoffAddress);
      add("Pickup Date/Time", `${d.pickupDate} ${d.pickupTime}`);
      if(d.journeyType==="return") add("Return Date/Time", `${d.returnDate} ${d.returnTime}`);
      add("Passengers", d.passengers);
      add("Suitcases", d.luggage);
      add("Inbound Flight", d.flightInbound);
      add("Notes", d.notes);
      document.getElementById("priceText").textContent = price;
    }

    function buildMessage(d, price){
      return [
        "üöñ Airport Transfer Booking Request",
        `üë§ ${d.name}`, `üì± ${d.mobile}`, d.email?`üìß ${d.email}`:"",
        `üö¶ ${d.journeyType}`, `üìç Pickup: ${d.pickup}`,
        `üèÅ Dropoff: ${d.journeyType==="return"?(d.dropoffAirport+(d.terminal?" ("+d.terminal+")":"")):d.dropoffAddress}`,
        `üìÖ Pickup: ${d.pickupDate} at ${d.pickupTime}`,
        d.journeyType==="return"?`üìÖ Return: ${d.returnDate} at ${d.returnTime}`:"",
        `üë• Passengers: ${d.passengers}`, `üß≥ Suitcases: ${d.luggage||"‚Äî"}`,
        d.flightInbound?`üõ¨ Inbound Flight: ${d.flightInbound}`:"",
        d.notes?`üìù Notes: ${d.notes}`:"",
        `üí∑ Price: ${price}`
      ].filter(Boolean).join("\n");
    }

    function sendToWhatsApp(){
      const d = JSON.parse(localStorage.getItem("bookingData")||"{}");
      const price = calculatePrice(d);
      window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(buildMessage(d,price))}`,"_blank","noopener");
    }

    function sendToEmail(){
      const d = JSON.parse(localStorage.getItem("bookingData")||"{}");
      const price = calculatePrice(d);
      const subject = "Airport Transfer Booking Request";
      const body = buildMessage(d,price);
      window.location.href = `mailto:${EMAIL_ADDRESS}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
    }

    window.addEventListener("DOMContentLoaded", ()=>{
      const data = JSON.parse(localStorage.getItem("bookingData")||"{}");
      if(!data.name){ document.getElementById("quoteCard").classList.add("hidden"); document.getElementById("noData").classList.remove("hidden"); return; }
      const price = calculatePrice(data);
      buildSummary(data, price);
    });
  </script>
</body>
</html>
